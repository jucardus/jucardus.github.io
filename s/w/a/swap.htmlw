<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Linux Mint Swap File Guide</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: linear-gradient(135deg, #7cc44c 0%, #4a8f2f 100%);
            color: white;
            padding: 30px 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: "";
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 60%);
            transform: rotate(30deg);
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .logo {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
            position: relative;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            flex: 1;
            min-width: 300px;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        h2 {
            color: #4a8f2f;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e9e9e9;
            display: flex;
            align-items: center;
        }

        h2 i {
            margin-right: 10px;
        }

        h3 {
            color: #5a5a5a;
            margin: 20px 0 12px;
            display: flex;
            align-items: center;
        }

        h3 i {
            margin-right: 8px;
            color: #7cc44c;
        }

        .step {
            margin-bottom: 20px;
            padding: 20px;
            background: #f9f9f9;
            border-left: 5px solid #7cc44c;
            border-radius: 6px;
            position: relative;
        }

        .step-number {
            position: absolute;
            top: -12px;
            left: -12px;
            background: #4a8f2f;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
        }

        .code {
            font-family: 'Fira Code', 'Courier New', Courier, monospace;
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 12px 0;
            font-size: 0.95rem;
            line-height: 1.5;
            border-left: 4px solid #7cc44c;
        }

        .error-code {
            border-left: 4px solid #ff4757;
        }

        .warning {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 18px;
            margin: 20px 0;
            border-radius: 6px;
            display: flex;
            align-items: flex-start;
        }

        .warning i {
            color: #ff9800;
            font-size: 1.5rem;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .tip {
            background-color: #d1ecf1;
            border-left: 5px solid #0c5460;
            padding: 18px;
            margin: 20px 0;
            border-radius: 6px;
            display: flex;
            align-items: flex-start;
        }

        .tip i {
            color: #0c5460;
            font-size: 1.5rem;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .command {
            font-weight: bold;
            color: #4a8f2f;
            font-family: 'Fira Code', 'Courier New', Courier, monospace;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 25px;
            color: #666;
            font-size: 0.95rem;
            border-top: 1px solid #ddd;
            border-radius: 10px;
            background: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
        }

        .footer-links {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .footer-links a {
            color: #4a8f2f;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-links a:hover {
            color: #7cc44c;
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }

            h1 {
                font-size: 2.2rem;
            }

            .subtitle {
                font-size: 1.1rem;
            }
        }

        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .info-table th, .info-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .info-table th {
            background-color: #f2f8f0;
            color: #4a8f2f;
        }

        .info-table tr:hover {
            background-color: #f9f9f9;
        }

        .troubleshooting {
            background-color: #f8f9fa;
            border-left: 5px solid #6c757d;
            padding: 20px;
            margin: 25px 0;
            border-radius: 6px;
        }

        .success {
            background-color: #d4edda;
            border-left: 5px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 6px;
        }
    </style>
</head>
<body>
    <header>
        <i class="fab fa-linux logo"></i>
        <h1>Complete Linux Mint Swap File Guide</h1>
        <p class="subtitle">Including troubleshooting for "Text file busy" error and verification steps</p>
    </header>

    <div class="container">
        <div class="card">
            <h2><i class="fas fa-plus-circle"></i> Creating a Swap File</h2>
            <p>This method creates a swap file on your internal drive, which is much faster than using a USB drive.</p>

            <div class="step">
                <div class="step-number">1</div>
                <h3><i class="fas fa-search"></i> Check Current Swap</h3>
                <p>First, verify if you already have swap space active:</p>
                <div class="code">swapon --show<br>free -h</div>
                <p>This helps you understand your current memory situation.</p>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <h3><i class="fas fa-file"></i> Create Swap File</h3>
                <p>Create a swap file (8GB in this example):</p>
                <div class="code">sudo dd if=/dev/zero of=/swapfile bs=1M count=8192 status=progress</div>
                <p>Adjust the <span class="command">count</span> value to change the size (e.g., 4096 for 4GB, 16384 for 16GB).</p>

                <div class="warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <div>
                        <h3>Possible Error: "Text file busy"</h3>
                        <p>If you see this error: <code>dd: failed to open '/swapfile': Text file busy</code>, it means a swap file already exists and is active.</p>
                    </div>
                </div>
            </div>

            <div class="troubleshooting">
                <h3><i class="fas fa-tools"></i> Troubleshooting "Text file busy" Error</h3>
                <p>Follow these steps if you encounter the error:</p>

                <div class="step">
                    <div class="step-number">A</div>
                    <h3><i class="fas fa-ban"></i> Disable Active Swap</h3>
                    <p>First, turn off the existing swap file:</p>
                    <div class="code">sudo swapoff /swapfile</div>
                </div>

                <div class="step">
                    <div class="step-number">B</div>
                    <h3><i class="fas fa-trash"></i> Remove Old Swap File</h3>
                    <p>Delete the existing swap file:</p>
                    <div class="code">sudo rm /swapfile</div>
                </div>

                <div class="step">
                    <div class="step-number">C</div>
                    <h3><i class="fas fa-redo"></i> Retry Creating Swap File</h3>
                    <p>Now try creating the swap file again:</p>
                    <div class="code">sudo dd if=/dev/zero of=/swapfile bs=1M count=8192 status=progress</div>
                </div>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <h3><i class="fas fa-lock"></i> Set Correct Permissions</h3>
                <p>Secure the swap file by restricting access:</p>
                <div class="code">sudo chmod 600 /swapfile</div>
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <h3><i class="fas fa-cogs"></i> Format as Swap</h3>
                <p>Set up the file as swap space:</p>
                <div class="code">sudo mkswap /swapfile</div>
            </div>

            <div class="step">
                <div class="step-number">5</div>
                <h3><i class="fas fa-power-off"></i> Enable the Swap File</h3>
                <p>Activate the swap file immediately:</p>
                <div class="code">sudo swapon /swapfile</div>
            </div>

            <div class="step">
                <div class="step-number">6</div>
                <h3><i class="fas fa-infinity"></i> Make It Permanent</h3>
                <p>Add to /etc/fstab to make it survive reboots:</p>
                <div class="code">echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab</div>
            </div>

            <div class="success">
                <h3><i class="fas fa-check-circle"></i> Verification Steps</h3>
                <p>After completing the process, verify everything is working correctly:</p>
                <div class="code"># Check active swap spaces<br>swapon --show<br><br># Check memory and swap usage<br>free -h<br><br># Verify the swap file exists<br>ls -lh /swapfile</div>
            </div>
        </div>

        <div class="card">
            <h2><i class="fas fa-trash-alt"></i> Removing a Swap File</h2>
            <p>Follow these steps to safely remove a swap file from your system.</p>

            <div class="warning">
                <i class="fas fa-exclamation-triangle"></i>
                <div>
                    <h3>Important Warning</h3>
                    <p>Never simply delete the swap file while it's active. This can cause system instability. Always follow these steps in order.</p>
                </div>
            </div>

            <div class="step">
                <div class="step-number">1</div>
                <h3><i class="fas fa-toggle-off"></i> Deactivate the Swap File</h3>
                <p>First, turn off the swap file:</p>
                <div class="code">sudo swapoff -v /swapfile</div>
                <p>The <span class="command">-v</span> flag provides verbose output.</p>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <h3><i class="fas fa-edit"></i> Remove from /etc/fstab</h3>
                <p>Edit the fstab file to remove the swap file entry:</p>
                <div class="code">sudo nano /etc/fstab</div>
                <p>Find the line that references your swap file and delete it:</p>
                <div class="code">/swapfile none swap sw 0 0</div>
                <p>Save the file and exit (Ctrl+O, Enter, Ctrl+X).</p>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <h3><i class="fas fa-trash"></i> Delete the Swap File</h3>
                <p>Now you can safely remove the file:</p>
                <div class="code">sudo rm /swapfile</div>
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <h3><i class="fas fa-check-circle"></i> Verify Removal</h3>
                <p>Confirm the swap file is no longer active:</p>
                <div class="code">swapon --show<br>free -h</div>
            </div>

            <div class="tip">
                <i class="fas fa-expand-arrows-alt"></i>
                <div>
                    <h3>Resizing a Swap File</h3>
                    <p>To change your swap file size, first remove the existing one following the steps above, then create a new one with your desired size.</p>
                </div>
            </div>

            <h2><i class="fas fa-sliders-h"></i> Swappiness Configuration</h2>

            <div class="step">
                <div class="step-number">1</div>
                <h3><i class="fas fa-tachometer-alt"></i> Check Current Swappiness</h3>
                <p>View the current swappiness value:</p>
                <div class="code">cat /proc/sys/vm/swappiness</div>
                <p>The default is usually 60.</p>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <h3><i class="fas fa-edit"></i> Change Swappiness</h3>
                <p>To change how aggressively your system uses swap:</p>
                <div class="code">echo 'vm.swappiness=10' | sudo tee -a /etc/sysctl.conf<br>sudo sysctl -p</div>
                <p>Lower values (like 10) make the kernel avoid swapping until necessary.</p>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <h3><i class="fas fa-sync-alt"></i> No Reboot Needed</h3>
                <p>The change takes effect immediately. Verify with:</p>
                <div class="code">cat /proc/sys/vm/swappiness</div>
                <p>You don't need to reboot after changing swappiness.</p>
            </div>
        </div>
    </div>

    <div class="card">
        <h2><i class="fas fa-info-circle"></i> Additional Information</h2>

        <h3><i class="fas fa-question-circle"></i> Why Use a Swap File?</h3>
        <p>Swap space is used when your physical RAM is full. Inactive memory pages are moved to swap to free up RAM for active processes.</p>

        <h3><i class="fas fa-balance-scale"></i> How Much Swap Do I Need?</h3>
        <table class="info-table">
            <thead>
                <tr>
                    <th>RAM Size</th>
                    <th>Recommended Swap</th>
                    <th>Note</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>4GB or less</td>
                    <td>2-4GB</td>
                    <td>Helps with memory pressure</td>
                </tr>
                <tr>
                    <td>8GB</td>
                    <td>2-4GB</td>
                    <td>Good for most use cases</td>
                </tr>
                <tr>
                    <td>16GB</td>
                    <td>2-8GB</td>
                    <td>For memory-intensive tasks</td>
                </tr>
                <tr>
                    <td>32GB+</td>
                    <td>4-8GB or none</td>
                    <td>Optional unless using hibernation</td>
                </tr>
            </tbody>
        </table>

        <h3><i class="fas fa-tachometer-alt"></i> Swap vs. RAM Performance</h3>
        <p>Swap is much slower than RAM as it uses disk storage. The goal is to have enough RAM that swap is rarely used, but enough swap to handle memory spikes.</p>

        <h3><i class="fas fa-bed"></i> Hibernation Note</h3>
        <p>If you plan to use hibernation, your swap space should be at least as large as your installed RAM.</p>

        <div class="warning">
            <i class="fas fa-exclamation-triangle"></i>
            <div>
                <h3>SSD Wear Consideration</h3>
                <p>Frequent swapping can reduce the lifespan of SSD drives. If you have an SSD, consider setting a lower swappiness value to minimize swap usage.</p>
            </div>
        </div>
    </div>

    <footer>
        <p>Linux Mint Swap File Guide | Created for reference purposes</p>
        <p>Always backup important data before making system changes</p>
        <div class="footer-links">
            <a href="#"><i class="fas fa-book"></i> Linux Mint Documentation</a>
            <a href="#"><i class="fas fa-users"></i> Community Forums</a>
            <a href="#"><i class="fas fa-code-branch"></i> GitHub Repository</a>
        </div>
    </footer>
</body>
</html>
