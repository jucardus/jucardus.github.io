<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-44Y9CNCHR8"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-44Y9CNCHR8');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">

    <!-- Highlight.js for Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <meta content='jucardus punto com, programación, traducciones, vocabularios, diccionario inglés-español, diccionario, perfil, sitio central, mis páginas, páginas favoritas, favoritas, escritos, contacto, traducciones, donaciones, pagos, actividad reciente, actividad, recientes, enlaces varios, enlaces, selección de enlaces, hipervínculos, vínculos, vínculos seleccionados, difusión, redes, redes de difusión, fotografías, invitación, invitación a la nube, invitación a pCloud, música, música clasica, canal de música, canal en YouTube, repositorio, cuenta en Twitter, cuenta en Tumblr, cuenta en Facebook, traducciones, servicio de traducciones, diccionarios, listas de reproducción, playlists, playlist' name='keywords'/>
    <meta content='Mi sitio central, con todas mis páginas.' name='description'/>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta content='Julio Cárdenas Pelizzari' name='author'/>

    <!-- Dynamic Title - Will be updated by JavaScript -->
    <title id="dynamic-title">JUCARDUS.COM</title>

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="loading" style="text-align: center; padding: 50px; font-size: 1.2em;">
        <!--Cargando JUCARDUS.COM...-->
    </div>
    <div id="content"></div>

    <script src="config.js"></script>
    <script src="utils.js"></script>
    <script src="markdown-processor.js"></script>
    <script src="navigation.js"></script>
    <script src="app.js"></script>

<script>
    // Enhanced script loader with better error handling
    function initializeApp() {
        const loading = document.getElementById('loading');
        const content = document.getElementById('content');
        
        // Check if all required functions are available
        const requiredFunctions = ['getCurrentPage', 'loadPage', 'renderMarkdown', 'highlightActiveNav'];
        const missingFunctions = requiredFunctions.filter(func => typeof window[func] !== 'function');
        
        if (missingFunctions.length === 0) {
            // All functions available - start the app
            if (loading) loading.style.display = 'none';
            console.log('All modules loaded successfully');
            loadPage(getCurrentPage());
        } else {
            // Some functions missing - show error but try to recover
            console.error('Missing functions:', missingFunctions);
            if (loading) loading.style.display = 'none';
            
            // Try to load index.md directly as fallback
            if (typeof loadPage === 'function') {
                loadPage('index.md');
            } else {
                content.innerHTML = 
                    '<center><h1>Error Loading Page</h1><p>Some features may not work. Please refresh the page.</p></center>';
            }
        }
    }

    // Wait for DOM and all scripts to be ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeApp);
    } else {
        initializeApp();
    }

    // Fallback: if still not loaded after 5 seconds, show status
    setTimeout(function() {
        const loading = document.getElementById('loading');
        if (loading && document.getElementById('content').innerHTML === '') {
            if (typeof getCurrentPage === 'function' && typeof loadPage === 'function') {
                loading.style.display = 'none';
                loadPage(getCurrentPage());
            } else {
                loading.innerHTML = 'Loading taking longer than expected...<br>Basic content should appear shortly.';
            }
        }
    }, 5000);
</script>
    
</body>
</html>
